(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16704,e=>{"use strict";var t=e.i(43476),r=e.i(932),l=e.i(71645),a=e.i(84774),s=e.i(87486),n=e.i(19455),i=e.i(93479),o=e.i(67489),c=e.i(55436),d=e.i(75254);let u=(0,d.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),m=(0,d.default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),h=(0,d.default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);function x(e){let d,x,p,v,j,g,b,y,w,S,N,C,_,T=(0,r.c)(49),{data:R,onQuickInbound:L,onAdjustment:E}=e,[P,D]=(0,l.useState)(""),[k,I]=(0,l.useState)("all");if(T[0]!==R||T[1]!==E||T[2]!==L||T[3]!==P||T[4]!==k){let e,r,l,w,S,N,C,_,H;T[13]!==P||T[14]!==k?(e=e=>{let t=e.item?.name.toLowerCase().includes(P.toLowerCase())||e.item?.code&&e.item.code.toLowerCase().includes(P.toLowerCase()),r="all"===k||e.item?.type===k;return t&&r},T[13]=P,T[14]=k,T[15]=e):e=T[15],p=R.filter(e);let A=f;b="space-y-4",T[16]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(c.Search,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),T[16]=r):r=T[16],T[17]===Symbol.for("react.memo_cache_sentinel")?(l=e=>D(e.target.value),T[17]=l):l=T[17],T[18]!==P?(w=(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[r,(0,t.jsx)(i.Input,{placeholder:"품목명 또는 코드 검색",className:"pl-8",value:P,onChange:l})]}),T[18]=P,T[19]=w):w=T[19],T[20]===Symbol.for("react.memo_cache_sentinel")?(S=e=>I(e),T[20]=S):S=T[20],T[21]===Symbol.for("react.memo_cache_sentinel")?(N=(0,t.jsxs)(o.SelectTrigger,{className:"w-[180px]",children:[(0,t.jsx)(u,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(o.SelectValue,{placeholder:"유형 필터"})]}),T[21]=N):N=T[21],T[22]===Symbol.for("react.memo_cache_sentinel")?(C=(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"all",children:"전체 유형"}),(0,t.jsx)(o.SelectItem,{value:"raw",children:"원자재"}),(0,t.jsx)(o.SelectItem,{value:"semi_finished",children:"반제품"}),(0,t.jsx)(o.SelectItem,{value:"finished",children:"완제품"})]}),T[22]=C):C=T[22],T[23]!==k?(_=(0,t.jsxs)(o.Select,{value:k,onValueChange:S,children:[N,C]}),T[23]=k,T[24]=_):_=T[24],T[25]!==_||T[26]!==w?(y=(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[w,_]}),T[25]=_,T[26]=w,T[27]=y):y=T[27],g="rounded-md border",x=a.Table,T[28]===Symbol.for("react.memo_cache_sentinel")?(j=(0,t.jsx)(a.TableHeader,{children:(0,t.jsxs)(a.TableRow,{children:[(0,t.jsx)(a.TableHead,{children:"품목명"}),(0,t.jsx)(a.TableHead,{children:"코드"}),(0,t.jsx)(a.TableHead,{children:"유형"}),(0,t.jsx)(a.TableHead,{className:"text-right",children:"현재 재고 (이론)"}),(0,t.jsx)(a.TableHead,{className:"text-right",children:"안전재고"}),(0,t.jsx)(a.TableHead,{className:"text-center",children:"상태"}),(0,t.jsx)(a.TableHead,{className:"text-right",children:"관리"})]})}),T[28]=j):j=T[28],d=a.TableBody,T[29]!==E||T[30]!==L?(H=e=>{let r=e.theoretical_quantity<=0,l=e.isLowStock;return(0,t.jsxs)(a.TableRow,{children:[(0,t.jsx)(a.TableCell,{className:"font-medium",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:e.item?.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.item?.category?.name})]})}),(0,t.jsx)(a.TableCell,{children:e.item?.code||"-"}),(0,t.jsx)(a.TableCell,{children:(0,t.jsx)(s.Badge,{variant:"outline",children:e.item?.type==="raw"?"원자재":e.item?.type==="semi_finished"?"반제품":"완제품"})}),(0,t.jsxs)(a.TableCell,{className:"text-right font-mono",children:[A(e.theoretical_quantity),(0,t.jsx)("span",{className:"ml-1 text-muted-foreground text-xs",children:e.item?.base_unit})]}),(0,t.jsx)(a.TableCell,{className:"text-right font-mono text-muted-foreground",children:e.item?.safety_stock?A(e.item.safety_stock):"-"}),(0,t.jsx)(a.TableCell,{className:"text-center",children:r?(0,t.jsx)(s.Badge,{variant:"destructive",className:"animate-pulse",children:"품절"}):l?(0,t.jsx)(s.Badge,{variant:"secondary",className:"text-yellow-600 bg-yellow-100 hover:bg-yellow-200",children:"부족"}):(0,t.jsx)(s.Badge,{variant:"outline",className:"text-green-600 bg-green-50 border-green-200",children:"적정"})}),(0,t.jsxs)(a.TableCell,{className:"text-right",children:[(0,t.jsx)(n.Button,{size:"sm",variant:"ghost",onClick:()=>E(e),title:"재고 실사/조정",className:"mr-1",children:(0,t.jsx)(h,{className:"h-4 w-4"})}),(0,t.jsx)(n.Button,{size:"sm",variant:"ghost",onClick:()=>L(e.item),title:"입고 리스트에 추가",children:(0,t.jsx)(m,{className:"h-4 w-4"})})]})]},e.id)},T[29]=E,T[30]=L,T[31]=H):H=T[31],v=p.map(H),T[0]=R,T[1]=E,T[2]=L,T[3]=P,T[4]=k,T[5]=d,T[6]=x,T[7]=p,T[8]=v,T[9]=j,T[10]=g,T[11]=b,T[12]=y}else d=T[5],x=T[6],p=T[7],v=T[8],j=T[9],g=T[10],b=T[11],y=T[12];return T[32]!==p.length?(w=0===p.length&&(0,t.jsx)(a.TableRow,{children:(0,t.jsx)(a.TableCell,{colSpan:7,className:"text-center h-24 text-muted-foreground",children:"검색 결과가 없습니다."})}),T[32]=p.length,T[33]=w):w=T[33],T[34]!==d||T[35]!==v||T[36]!==w?(S=(0,t.jsxs)(d,{children:[v,w]}),T[34]=d,T[35]=v,T[36]=w,T[37]=S):S=T[37],T[38]!==x||T[39]!==j||T[40]!==S?(N=(0,t.jsxs)(x,{children:[j,S]}),T[38]=x,T[39]=j,T[40]=S,T[41]=N):N=T[41],T[42]!==g||T[43]!==N?(C=(0,t.jsx)("div",{className:g,children:N}),T[42]=g,T[43]=N,T[44]=C):C=T[44],T[45]!==b||T[46]!==y||T[47]!==C?(_=(0,t.jsxs)("div",{className:b,children:[y,C]}),T[45]=b,T[46]=y,T[47]=C,T[48]=_):_=T[48],_}function f(e){return e.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:3})}var p=e.i(18566),v=e.i(95187);let j=(0,v.createServerReference)("60303a55485326f00bce0e83e0ad243a82e646c192",v.callServer,void 0,v.findSourceMapURL,"processInbound");var g=e.i(10204),b=e.i(76639),y=e.i(46696),w=e.i(27612),S=e.i(48425),N=e.i(96626),C=e.i(30030),_=e.i(20783),T=e.i(30207),R=e.i(86318),L=e.i(34620),E=e.i(70152),P=e.i(81140),D="ScrollArea",[k,I]=(0,C.createContextScope)(D),[H,A]=k(D),q=l.forwardRef((e,r)=>{let{__scopeScrollArea:a,type:s="hover",dir:n,scrollHideDelay:i=600,...o}=e,[c,d]=l.useState(null),[u,m]=l.useState(null),[h,x]=l.useState(null),[f,p]=l.useState(null),[v,j]=l.useState(null),[g,b]=l.useState(0),[y,w]=l.useState(0),[N,C]=l.useState(!1),[T,L]=l.useState(!1),E=(0,_.useComposedRefs)(r,e=>d(e)),P=(0,R.useDirection)(n);return(0,t.jsx)(H,{scope:a,type:s,dir:P,scrollHideDelay:i,scrollArea:c,viewport:u,onViewportChange:m,content:h,onContentChange:x,scrollbarX:f,onScrollbarXChange:p,scrollbarXEnabled:N,onScrollbarXEnabledChange:C,scrollbarY:v,onScrollbarYChange:j,scrollbarYEnabled:T,onScrollbarYEnabledChange:L,onCornerWidthChange:b,onCornerHeightChange:w,children:(0,t.jsx)(S.Primitive.div,{dir:P,...o,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});q.displayName=D;var B="ScrollAreaViewport",z=l.forwardRef((e,r)=>{let{__scopeScrollArea:a,children:s,nonce:n,...i}=e,o=A(B,a),c=l.useRef(null),d=(0,_.useComposedRefs)(r,c,o.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,t.jsx)(S.Primitive.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});z.displayName=B;var M="ScrollAreaScrollbar",V=l.forwardRef((e,r)=>{let{forceMount:a,...s}=e,n=A(M,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,c="horizontal"===e.orientation;return l.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),"hover"===n.type?(0,t.jsx)(O,{...s,ref:r,forceMount:a}):"scroll"===n.type?(0,t.jsx)(U,{...s,ref:r,forceMount:a}):"auto"===n.type?(0,t.jsx)(F,{...s,ref:r,forceMount:a}):"always"===n.type?(0,t.jsx)(W,{...s,ref:r}):null});V.displayName=M;var O=l.forwardRef((e,r)=>{let{forceMount:a,...s}=e,n=A(M,e.__scopeScrollArea),[i,o]=l.useState(!1);return l.useEffect(()=>{let e=n.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),o(!0)},l=()=>{t=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",l),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",l)}}},[n.scrollArea,n.scrollHideDelay]),(0,t.jsx)(N.Presence,{present:a||i,children:(0,t.jsx)(F,{"data-state":i?"visible":"hidden",...s,ref:r})})}),U=l.forwardRef((e,r)=>{var a;let{forceMount:s,...n}=e,i=A(M,e.__scopeScrollArea),o="horizontal"===e.orientation,c=ec(()=>u("SCROLL_END"),100),[d,u]=(a={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},l.useReducer((e,t)=>a[e][t]??e,"hidden"));return l.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,i.scrollHideDelay,u]),l.useEffect(()=>{let e=i.viewport,t=o?"scrollLeft":"scrollTop";if(e){let r=e[t],l=()=>{let l=e[t];r!==l&&(u("SCROLL"),c()),r=l};return e.addEventListener("scroll",l),()=>e.removeEventListener("scroll",l)}},[i.viewport,o,u,c]),(0,t.jsx)(N.Presence,{present:s||"hidden"!==d,children:(0,t.jsx)(W,{"data-state":"hidden"===d?"hidden":"visible",...n,ref:r,onPointerEnter:(0,P.composeEventHandlers)(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:(0,P.composeEventHandlers)(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),F=l.forwardRef((e,r)=>{let a=A(M,e.__scopeScrollArea),{forceMount:s,...n}=e,[i,o]=l.useState(!1),c="horizontal"===e.orientation,d=ec(()=>{if(a.viewport){let e=a.viewport.offsetWidth<a.viewport.scrollWidth,t=a.viewport.offsetHeight<a.viewport.scrollHeight;o(c?e:t)}},10);return ed(a.viewport,d),ed(a.content,d),(0,t.jsx)(N.Presence,{present:s||i,children:(0,t.jsx)(W,{"data-state":i?"visible":"hidden",...n,ref:r})})}),W=l.forwardRef((e,r)=>{let{orientation:a="vertical",...s}=e,n=A(M,e.__scopeScrollArea),i=l.useRef(null),o=l.useRef(0),[c,d]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=ea(c.viewport,c.content),m={...s,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,t){return function(e,t,r,l="ltr"){let a=es(r),s=t||a/2,n=r.scrollbar.paddingStart+s,i=r.scrollbar.size-r.scrollbar.paddingEnd-(a-s),o=r.content-r.viewport;return ei([n,i],"ltr"===l?[0,o]:[-1*o,0])(e)}(e,o.current,c,t)}return"horizontal"===a?(0,t.jsx)(X,{...m,ref:r,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=en(n.viewport.scrollLeft,c,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=h(e,n.dir))}}):"vertical"===a?(0,t.jsx)(Y,{...m,ref:r,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=en(n.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=h(e))}}):null}),X=l.forwardRef((e,r)=>{let{sizes:a,onSizesChange:s,...n}=e,i=A(M,e.__scopeScrollArea),[o,c]=l.useState(),d=l.useRef(null),u=(0,_.useComposedRefs)(r,d,i.onScrollbarXChange);return l.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(K,{"data-orientation":"horizontal",...n,ref:u,sizes:a,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":es(a)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(i.viewport){var l,a;let s=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(s),l=s,a=r,l>0&&l<a&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:el(o.paddingLeft),paddingEnd:el(o.paddingRight)}})}})}),Y=l.forwardRef((e,r)=>{let{sizes:a,onSizesChange:s,...n}=e,i=A(M,e.__scopeScrollArea),[o,c]=l.useState(),d=l.useRef(null),u=(0,_.useComposedRefs)(r,d,i.onScrollbarYChange);return l.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(K,{"data-orientation":"vertical",...n,ref:u,sizes:a,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":es(a)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(i.viewport){var l,a;let s=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(s),l=s,a=r,l>0&&l<a&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:el(o.paddingTop),paddingEnd:el(o.paddingBottom)}})}})}),[Q,$]=k(M),K=l.forwardRef((e,r)=>{let{__scopeScrollArea:a,sizes:s,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:m,onResize:h,...x}=e,f=A(M,a),[p,v]=l.useState(null),j=(0,_.useComposedRefs)(r,e=>v(e)),g=l.useRef(null),b=l.useRef(""),y=f.viewport,w=s.content-s.viewport,N=(0,T.useCallbackRef)(m),C=(0,T.useCallbackRef)(d),R=ec(h,10);function L(e){g.current&&u({x:e.clientX-g.current.left,y:e.clientY-g.current.top})}return l.useEffect(()=>{let e=e=>{let t=e.target;p?.contains(t)&&N(e,w)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[y,p,w,N]),l.useEffect(C,[s,C]),ed(p,R),ed(f.content,R),(0,t.jsx)(Q,{scope:a,scrollbar:p,hasThumb:n,onThumbChange:(0,T.useCallbackRef)(i),onThumbPointerUp:(0,T.useCallbackRef)(o),onThumbPositionChange:C,onThumbPointerDown:(0,T.useCallbackRef)(c),children:(0,t.jsx)(S.Primitive.div,{...x,ref:j,style:{position:"absolute",...x.style},onPointerDown:(0,P.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),g.current=p.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),L(e))}),onPointerMove:(0,P.composeEventHandlers)(e.onPointerMove,L),onPointerUp:(0,P.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=b.current,f.viewport&&(f.viewport.style.scrollBehavior=""),g.current=null})})})}),G="ScrollAreaThumb",J=l.forwardRef((e,r)=>{let{forceMount:l,...a}=e,s=$(G,e.__scopeScrollArea);return(0,t.jsx)(N.Presence,{present:l||s.hasThumb,children:(0,t.jsx)(Z,{ref:r,...a})})}),Z=l.forwardRef((e,r)=>{let{__scopeScrollArea:a,style:s,...n}=e,i=A(G,a),o=$(G,a),{onThumbPositionChange:c}=o,d=(0,_.useComposedRefs)(r,e=>o.onThumbChange(e)),u=l.useRef(void 0),m=ec(()=>{u.current&&(u.current(),u.current=void 0)},100);return l.useEffect(()=>{let e=i.viewport;if(e){let t=()=>{m(),u.current||(u.current=eo(e,c),c())};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,m,c]),(0,t.jsx)(S.Primitive.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:(0,P.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,l=e.clientY-t.top;o.onThumbPointerDown({x:r,y:l})}),onPointerUp:(0,P.composeEventHandlers)(e.onPointerUp,o.onThumbPointerUp)})});J.displayName=G;var ee="ScrollAreaCorner",et=l.forwardRef((e,r)=>{let l=A(ee,e.__scopeScrollArea),a=!!(l.scrollbarX&&l.scrollbarY);return"scroll"!==l.type&&a?(0,t.jsx)(er,{...e,ref:r}):null});et.displayName=ee;var er=l.forwardRef((e,r)=>{let{__scopeScrollArea:a,...s}=e,n=A(ee,a),[i,o]=l.useState(0),[c,d]=l.useState(0),u=!!(i&&c);return ed(n.scrollbarX,()=>{let e=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(e),d(e)}),ed(n.scrollbarY,()=>{let e=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(e),o(e)}),u?(0,t.jsx)(S.Primitive.div,{...s,ref:r,style:{width:i,height:c,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...e.style}}):null});function el(e){return e?parseInt(e,10):0}function ea(e,t){let r=e/t;return isNaN(r)?0:r}function es(e){let t=ea(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function en(e,t,r="ltr"){let l=es(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,n=t.content-t.viewport,i=(0,E.clamp)(e,"ltr"===r?[0,n]:[-1*n,0]);return ei([0,n],[0,s-l])(i)}function ei(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let l=(t[1]-t[0])/(e[1]-e[0]);return t[0]+l*(r-e[0])}}var eo=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},l=0;return!function a(){let s={left:e.scrollLeft,top:e.scrollTop},n=r.left!==s.left,i=r.top!==s.top;(n||i)&&t(),r=s,l=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(l)};function ec(e,t){let r=(0,T.useCallbackRef)(e),a=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(a.current),[]),l.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,t)},[r,t])}function ed(e,t){let r=(0,T.useCallbackRef)(t);(0,L.useLayoutEffect)(()=>{let t=0;if(e){let l=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return l.observe(e),()=>{window.cancelAnimationFrame(t),l.unobserve(e)}}},[e,r])}e.s(["Corner",()=>et,"Root",()=>q,"ScrollArea",()=>q,"ScrollAreaCorner",()=>et,"ScrollAreaScrollbar",()=>V,"ScrollAreaThumb",()=>J,"ScrollAreaViewport",()=>z,"Scrollbar",()=>V,"Thumb",()=>J,"Viewport",()=>z,"createScrollAreaScope",()=>I],60805);var eu=e.i(60805),eu=eu,em=e.i(75157);function eh(e){let l,a,s,n,i,o,c,d,u=(0,r.c)(14);return u[0]!==e?({className:a,children:l,...s}=e,u[0]=e,u[1]=l,u[2]=a,u[3]=s):(l=u[1],a=u[2],s=u[3]),u[4]!==a?(n=(0,em.cn)("relative",a),u[4]=a,u[5]=n):n=u[5],u[6]!==l?(i=(0,t.jsx)(eu.Viewport,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:l}),u[6]=l,u[7]=i):i=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)(ex,{}),c=(0,t.jsx)(eu.Corner,{}),u[8]=o,u[9]=c):(o=u[8],c=u[9]),u[10]!==s||u[11]!==n||u[12]!==i?(d=(0,t.jsxs)(eu.Root,{"data-slot":"scroll-area",className:n,...s,children:[i,o,c]}),u[10]=s,u[11]=n,u[12]=i,u[13]=d):d=u[13],d}function ex(e){let l,a,s,n,i,o,c=(0,r.c)(13);c[0]!==e?({className:l,orientation:s,...a}=e,c[0]=e,c[1]=l,c[2]=a,c[3]=s):(l=c[1],a=c[2],s=c[3]);let d=void 0===s?"vertical":s,u="vertical"===d&&"h-full w-2.5 border-l border-l-transparent",m="horizontal"===d&&"h-2.5 flex-col border-t border-t-transparent";return c[4]!==l||c[5]!==u||c[6]!==m?(n=(0,em.cn)("flex touch-none p-px transition-colors select-none",u,m,l),c[4]=l,c[5]=u,c[6]=m,c[7]=n):n=c[7],c[8]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(eu.ScrollAreaThumb,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"}),c[8]=i):i=c[8],c[9]!==d||c[10]!==a||c[11]!==n?(o=(0,t.jsx)(eu.ScrollAreaScrollbar,{"data-slot":"scroll-area-scrollbar",orientation:d,className:n,...a,children:i}),c[9]=d,c[10]=a,c[11]=n,c[12]=o):o=c[12],o}function ef({items:e,suppliers:r,itemToAdd:a,onItemAdded:s}){let d=(0,p.useRouter)(),[u,h]=(0,l.useState)(!1),[x,f]=(0,l.useState)(!1),[v,S]=(0,l.useState)(""),[N,C]=(0,l.useState)(""),[_,T]=(0,l.useState)([]),R=e.filter(e=>e.name.toLowerCase().includes(N.toLowerCase())||e.code&&e.code.toLowerCase().includes(N.toLowerCase()));(0,l.useEffect)(()=>{a&&(T(e=>e.some(e=>e.itemId===a.id)?(y.toast.info("이미 입고 리스트에 있는 품목입니다."),e):(y.toast.info(`${a.name}이(가) 입고 리스트에 추가되었습니다.`),[...e,{itemId:a.id,name:a.name,quantity:0,unitPrice:a.latest_purchase_price||0,unit:a.base_unit}])),h(!0),s?.())},[a,s]);let L=(e,t,r)=>{let l=[..._];l[e]={...l[e],[t]:r},T(l)},E=async e=>{if(e.preventDefault(),0===_.length)return void y.toast.error("입고할 품목을 선택해주세요.");f(!0);try{let e=await j(v||null,_.map(e=>({itemId:e.itemId,quantity:e.quantity,unitPrice:e.unitPrice,expiryDate:e.expiryDate})));if(e.error)return void y.toast.error(e.error);y.toast.success("입고 처리가 완료되었습니다."),h(!1),T([]),S(""),s&&s(),d.refresh()}catch(e){y.toast.error("오류가 발생했습니다.")}finally{f(!1)}};return(0,t.jsxs)(b.Dialog,{open:u,onOpenChange:h,children:[(0,t.jsx)(b.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{children:[(0,t.jsx)(m,{className:"mr-2 h-4 w-4"}),"입고 등록 (Quick Receive)"]})}),(0,t.jsx)(b.DialogContent,{className:"sm:max-w-[800px] h-[80vh] flex flex-col",children:(0,t.jsxs)("form",{onSubmit:E,className:"flex flex-col h-full",children:[(0,t.jsxs)(b.DialogHeader,{children:[(0,t.jsx)(b.DialogTitle,{children:"입고 등록"}),(0,t.jsx)(b.DialogDescription,{children:"거래처로부터 입고된 물품을 등록합니다. 재고가 즉시 증가합니다."})]}),(0,t.jsxs)("div",{className:"flex-1 flex gap-4 py-4 min-h-0",children:[(0,t.jsxs)("div",{className:"w-1/3 border-r pr-4 flex flex-col gap-2",children:[(0,t.jsx)(g.Label,{children:"품목 검색"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.Search,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.Input,{placeholder:"품목명/코드",className:"pl-8",value:N,onChange:e=>C(e.target.value)})]}),(0,t.jsx)(eh,{className:"flex-1 border rounded-md p-2",children:(0,t.jsx)("div",{className:"space-y-1",children:R.map(e=>(0,t.jsxs)("button",{type:"button",className:"w-full text-left px-2 py-1.5 text-sm rounded hover:bg-muted flex justify-between items-center",onClick:()=>{_.some(t=>t.itemId===e.id)?y.toast.error("이미 추가된 품목입니다."):T([..._,{itemId:e.id,name:e.name,quantity:0,unitPrice:e.latest_purchase_price||0,unit:e.base_unit}])},children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.base_unit})]},e.id))})})]}),(0,t.jsxs)("div",{className:"w-2/3 flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g.Label,{children:"거래처 (선택)"}),(0,t.jsxs)(o.Select,{value:v,onValueChange:S,children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{placeholder:"거래처 선택"})}),(0,t.jsx)(o.SelectContent,{children:r.map(e=>(0,t.jsx)(o.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsx)("div",{className:"flex-1 border rounded-md p-2 overflow-auto",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-2 text-xs font-medium text-muted-foreground px-2",children:[(0,t.jsx)("div",{className:"col-span-3",children:"품목명"}),(0,t.jsx)("div",{className:"col-span-2",children:"수량"}),(0,t.jsx)("div",{className:"col-span-1",children:"단위"}),(0,t.jsx)("div",{className:"col-span-3",children:"단가 (원)"}),(0,t.jsx)("div",{className:"col-span-2",children:"합계"}),(0,t.jsx)("div",{className:"col-span-1"})]}),_.map((e,r)=>(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center px-2 py-1 border-b last:border-0",children:[(0,t.jsx)("div",{className:"col-span-3 text-sm font-medium truncate",children:e.name}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)(i.Input,{type:"number",min:"0",step:"0.001",className:"h-8",value:e.quantity,onChange:e=>L(r,"quantity",Number(e.target.value))})}),(0,t.jsx)("div",{className:"col-span-1 text-sm text-muted-foreground",children:e.unit}),(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsx)(i.Input,{type:"number",min:"0",className:"h-8",value:e.unitPrice,onChange:e=>L(r,"unitPrice",Number(e.target.value))})}),(0,t.jsx)("div",{className:"col-span-2 text-sm text-right",children:(e.quantity*e.unitPrice).toLocaleString()}),(0,t.jsx)("div",{className:"col-span-1 text-right",children:(0,t.jsx)(n.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>{let e;(e=[..._]).splice(r,1),T(e)},children:(0,t.jsx)(w.Trash2,{className:"h-4 w-4"})})})]},e.itemId)),0===_.length&&(0,t.jsx)("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"왼쪽에서 입고할 품목을 선택하세요."})]})}),(0,t.jsxs)("div",{className:"flex justify-end items-center gap-4 border-t pt-2",children:[(0,t.jsx)("div",{className:"text-sm",children:"총 입고 금액"}),(0,t.jsxs)("div",{className:"text-xl font-bold",children:[_.reduce((e,t)=>e+t.quantity*t.unitPrice,0).toLocaleString(),"원"]})]})]})]}),(0,t.jsxs)(b.DialogFooter,{children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>h(!1),children:"취소"}),(0,t.jsx)(n.Button,{type:"submit",disabled:x,children:x?"처리 중...":"입고 확정"})]})]})})]})}var ep=e.i(15288),ev=e.i(88844),ej=e.i(82458),ej=ej;let eg=(0,d.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var eb=e.i(23287),eb=eb;function ey(e){let l,a,s,n,i,o,c,d,u,m,h,x,f,p,v,j,g,b,y,w,S=(0,r.c)(36),{data:N}=e,C=N.length;S[0]!==N?(l=N.filter(eS),S[0]=N,S[1]=l):l=S[1];let _=l;S[2]!==N?(a=N.filter(ew),S[2]=N,S[3]=a):a=S[3];let T=a,R=C-_.length;S[4]!==R||S[5]!==C?(s=C>0?Math.round(R/C*100):100,S[4]=R,S[5]=C,S[6]=s):s=S[6];let L=s;return S[7]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsxs)(ep.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(ep.CardTitle,{className:"text-sm font-medium",children:"전체 품목"}),(0,t.jsx)(ev.Package,{className:"h-4 w-4 text-muted-foreground"})]}),S[7]=n):n=S[7],S[8]!==C?(i=(0,t.jsx)("div",{className:"text-2xl font-bold",children:C}),S[8]=C,S[9]=i):i=S[9],S[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"관리 중인 총 자재/상품 수"}),S[10]=o):o=S[10],S[11]!==i?(c=(0,t.jsxs)(ep.Card,{children:[n,(0,t.jsxs)(ep.CardContent,{children:[i,o]})]}),S[11]=i,S[12]=c):c=S[12],S[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsxs)(ep.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(ep.CardTitle,{className:"text-sm font-medium",children:"안전재고 미달"}),(0,t.jsx)(ej.default,{className:"h-4 w-4 text-yellow-500"})]}),S[13]=d):d=S[13],S[14]!==_.length?(u=(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:_.length}),S[14]=_.length,S[15]=u):u=S[15],S[16]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"발주가 필요한 품목 수"}),S[16]=m):m=S[16],S[17]!==u?(h=(0,t.jsxs)(ep.Card,{children:[d,(0,t.jsxs)(ep.CardContent,{children:[u,m]})]}),S[17]=u,S[18]=h):h=S[18],S[19]===Symbol.for("react.memo_cache_sentinel")?(x=(0,t.jsxs)(ep.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(ep.CardTitle,{className:"text-sm font-medium",children:"품절 (Out of Stock)"}),(0,t.jsx)(eg,{className:"h-4 w-4 text-red-500"})]}),S[19]=x):x=S[19],S[20]!==T.length?(f=(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:T.length}),S[20]=T.length,S[21]=f):f=S[21],S[22]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"즉시 조치가 필요한 품목"}),S[22]=p):p=S[22],S[23]!==f?(v=(0,t.jsxs)(ep.Card,{children:[x,(0,t.jsxs)(ep.CardContent,{children:[f,p]})]}),S[23]=f,S[24]=v):v=S[24],S[25]===Symbol.for("react.memo_cache_sentinel")?(j=(0,t.jsxs)(ep.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(ep.CardTitle,{className:"text-sm font-medium",children:"재고 건전성"}),(0,t.jsx)(eb.default,{className:"h-4 w-4 text-green-500"})]}),S[25]=j):j=S[25],S[26]!==L?(g=(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[L,"%"]}),S[26]=L,S[27]=g):g=S[27],S[28]===Symbol.for("react.memo_cache_sentinel")?(b=(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"안전재고 확보율"}),S[28]=b):b=S[28],S[29]!==g?(y=(0,t.jsxs)(ep.Card,{children:[j,(0,t.jsxs)(ep.CardContent,{children:[g,b]})]}),S[29]=g,S[30]=y):y=S[30],S[31]!==h||S[32]!==v||S[33]!==y||S[34]!==c?(w=(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[c,h,v,y]}),S[31]=h,S[32]=v,S[33]=y,S[34]=c,S[35]=w):w=S[35],w}function ew(e){return e.theoretical_quantity<=0}function eS(e){return e.theoretical_quantity<(e.item?.safety_stock||0)}var eN=e.i(7233);let eC=(0,d.default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),e_=(0,d.default)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var eT=e.i(31278);let eR=(0,v.createServerReference)("00d5bcbf9aa6f4922828f683c032d1a04c834a1d2c",v.callServer,void 0,v.findSourceMapURL,"getSaleItems"),eL=(0,v.createServerReference)("609ed4e16310a2dcf71382951bae8adf04e92d8fe6",v.callServer,void 0,v.findSourceMapURL,"recordSale"),eE=(0,v.createServerReference)("0085bff464ce6ca2bc5a4b68c455817bc775cf4446",v.callServer,void 0,v.findSourceMapURL,"getUserStore");function eP(){let[e,r]=(0,l.useState)(!1),[a,s]=(0,l.useState)([]),[c,d]=(0,l.useState)([{itemId:"",quantity:1}]),[u,m]=(0,l.useState)(!1),[h,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{e&&async function(){try{let[e,t]=await Promise.all([eR(),eE()]);s(e),x(t?.id??null)}catch(e){console.error("Error loading sales data:",e),y.toast.error("데이터 로딩 실패",{description:"판매 가능한 상품 목록을 불러오지 못했습니다."})}}()},[e]);let f=(e,t,r)=>{let l=[...c];"quantity"===t?l[e].quantity=Number(r):l[e].itemId=r,d(l)},p=async()=>{if(!h)return void y.toast.error("매장 정보 없음",{description:"매장 정보를 불러오지 못했습니다. 다시 시도해주세요."});if(c.filter(e=>!e.itemId||e.quantity<=0).length>0)return void y.toast.error("입력 오류",{description:"모든 항목의 상품을 선택하고 수량을 입력해주세요."});m(!0);try{let e=await eL(h,c);if(e.success)y.toast.success("판매 완료",{description:"판매가 기록되고 재고가 차감되었습니다."}),d([{itemId:"",quantity:1}]),r(!1);else throw Error(e.message)}catch(e){y.toast.error("오류 발생",{description:e.message||"판매 기록 중 오류가 발생했습니다."})}finally{m(!1)}};return(0,t.jsxs)(b.Dialog,{open:e,onOpenChange:r,children:[(0,t.jsx)(b.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{variant:"outline",className:"gap-2",children:[(0,t.jsx)(e_,{className:"h-4 w-4"}),"판매 시뮬레이터 (POS)"]})}),(0,t.jsxs)(b.DialogContent,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(b.DialogHeader,{children:[(0,t.jsx)(b.DialogTitle,{children:"판매 시뮬레이터"}),(0,t.jsx)(b.DialogDescription,{children:"판매를 기록하여 실시간 재고 차감 기능을 테스트합니다. (완제품만 선택 가능)"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4 max-h-[60vh] overflow-y-auto",children:[0===a.length?(0,t.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"판매 가능한 완제품이 없습니다. 상품 관리에서 완제품을 등록해주세요."}):c.map((e,r)=>(0,t.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,t.jsx)("div",{className:"flex-1 space-y-2",children:(0,t.jsxs)(o.Select,{value:e.itemId,onValueChange:e=>f(r,"itemId",e),children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{placeholder:"상품 선택"})}),(0,t.jsx)(o.SelectContent,{children:a.map(e=>(0,t.jsxs)(o.SelectItem,{value:e.id,children:[e.name," (",e.sale_price?.toLocaleString(),"원)"]},e.id))})]})}),(0,t.jsx)("div",{className:"w-24 space-y-2",children:(0,t.jsx)(i.Input,{type:"number",min:"1",value:e.quantity,onChange:e=>f(r,"quantity",e.target.value),placeholder:"수량"})}),(0,t.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>{let e;(e=[...c]).splice(r,1),d(e)},disabled:1===c.length,children:(0,t.jsx)(eC,{className:"h-4 w-4 text-muted-foreground"})})]},r)),(0,t.jsxs)(n.Button,{variant:"outline",onClick:()=>{d([...c,{itemId:"",quantity:1}])},type:"button",className:"w-full border-dashed",disabled:0===a.length,children:[(0,t.jsx)(eN.Plus,{className:"mr-2 h-4 w-4"}),"상품 추가"]})]}),(0,t.jsxs)(b.DialogFooter,{children:[(0,t.jsx)(n.Button,{variant:"outline",onClick:()=>r(!1),disabled:u,children:"취소"}),(0,t.jsxs)(n.Button,{onClick:p,disabled:u||0===a.length,children:[u&&(0,t.jsx)(eT.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"결제 및 재고 차감"]})]})]})]})}var eD=e.i(24687);let ek=(0,v.createServerReference)("785de28928d98ff96a0fe1b93fa37d1c029aed68fa",v.callServer,void 0,v.findSourceMapURL,"updatePhysicalCount");function eI({isOpen:e,onClose:r,item:a}){let[s,c]=(0,l.useState)(""),[d,u]=(0,l.useState)("adjustment"),[m,h]=(0,l.useState)(""),[x,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{a&&e&&(c(a.theoretical_quantity.toString()),u("adjustment"),h(""))},[a,e]);let p=async e=>{if(e.preventDefault(),!a)return;let t=parseFloat(s);if(isNaN(t))return void y.toast.error("유효한 수량을 입력해주세요.");f(!0);try{let e=await ek(a.item_id,t,d,m);e.error?y.toast.error(e.error):(y.toast.success("재고 실사가 반영되었습니다."),r())}catch(e){console.error(e),y.toast.error("오류가 발생했습니다.")}finally{f(!1)}},v=a?.theoretical_quantity||0,j=(parseFloat(s)||0)-v;return(0,t.jsx)(b.Dialog,{open:e,onOpenChange:r,children:(0,t.jsxs)(b.DialogContent,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(b.DialogHeader,{children:[(0,t.jsx)(b.DialogTitle,{children:"재고 실사 / 조정"}),(0,t.jsxs)(b.DialogDescription,{children:[a?.item.name,"의 실제 재고 수량을 입력하세요."]})]}),(0,t.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g.Label,{children:"현재 전산 재고"}),(0,t.jsxs)("div",{className:"p-2 border rounded-md bg-muted text-right font-mono",children:[v.toLocaleString()," ",a?.item.base_unit]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g.Label,{htmlFor:"countedQty",children:"실사 수량"}),(0,t.jsx)(i.Input,{id:"countedQty",type:"number",step:"0.001",value:s,onChange:e=>c(e.target.value),className:"text-right font-mono",required:!0})]})]}),(0,t.jsxs)("div",{className:"p-3 rounded-md bg-slate-50 border flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"차이 (Variance)"}),(0,t.jsxs)("span",{className:`font-mono font-bold ${j<0?"text-red-600":j>0?"text-blue-600":"text-gray-600"}`,children:[j>0?"+":"",j.toLocaleString()," ",a?.item.base_unit]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g.Label,{htmlFor:"reason",children:"조정 사유"}),(0,t.jsxs)(o.Select,{value:d,onValueChange:u,children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{placeholder:"사유 선택"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"adjustment",children:"정기 실사 조정"}),(0,t.jsx)(o.SelectItem,{value:"waste",children:"폐기 / 손실"}),(0,t.jsx)(o.SelectItem,{value:"theft",children:"도난 / 분실"}),(0,t.jsx)(o.SelectItem,{value:"damage",children:"파손"}),(0,t.jsx)(o.SelectItem,{value:"correction",children:"입력 오류 수정"}),(0,t.jsx)(o.SelectItem,{value:"other",children:"기타"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g.Label,{htmlFor:"notes",children:"메모 (선택)"}),(0,t.jsx)(eD.Textarea,{id:"notes",value:m,onChange:e=>h(e.target.value),placeholder:"특이사항을 입력하세요",rows:2})]}),(0,t.jsxs)(b.DialogFooter,{children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",onClick:r,disabled:x,children:"취소"}),(0,t.jsxs)(n.Button,{type:"submit",disabled:x,children:[x&&(0,t.jsx)(eT.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"조정사항 반영"]})]})]})]})})}function eH(e){let a,s,n,i,o,c,d,u,m,h,f,p=(0,r.c)(22),{inventoryData:v,items:j,suppliers:g}=e,[b,y]=(0,l.useState)(null),[w,S]=(0,l.useState)(null),[N,C]=(0,l.useState)(!1);p[0]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{y(e)},p[0]=a):a=p[0];let _=a;p[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{y(null)},p[1]=s):s=p[1];let T=s;p[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{S(e),C(!0)},p[2]=n):n=p[2];let R=n;return p[3]!==N||p[4]!==w?(i=w&&(0,t.jsx)(eI,{isOpen:N,onClose:()=>C(!1),item:w}),p[3]=N,p[4]=w,p[5]=i):i=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"재고 현황"}),p[6]=o):o=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)(eP,{}),p[7]=c):c=p[7],p[8]!==b||p[9]!==j||p[10]!==g?(d=(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[o,(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[c,(0,t.jsx)(ef,{items:j,suppliers:g,itemToAdd:b,onItemAdded:T})]})]}),p[8]=b,p[9]=j,p[10]=g,p[11]=d):d=p[11],p[12]!==v?(u=(0,t.jsx)(ey,{data:v}),p[12]=v,p[13]=u):u=p[13],p[14]===Symbol.for("react.memo_cache_sentinel")?(m=e=>_({...e}),p[14]=m):m=p[14],p[15]!==v?(h=(0,t.jsx)(x,{data:v,onQuickInbound:m,onAdjustment:R}),p[15]=v,p[16]=h):h=p[16],p[17]!==h||p[18]!==i||p[19]!==d||p[20]!==u?(f=(0,t.jsxs)("div",{className:"space-y-6",children:[i,d,u,h]}),p[17]=h,p[18]=i,p[19]=d,p[20]=u,p[21]=f):f=p[21],f}e.s(["InventoryDashboard",()=>eH],16704)}]);