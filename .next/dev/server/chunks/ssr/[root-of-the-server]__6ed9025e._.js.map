{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Proj/cafe-bakery-saas/src/app/auth/signup/actions.ts"],"sourcesContent":["'use server'\n\nimport { createClient } from '@/lib/supabase/server'\n\nexport type SignupState = {\n  error?: string\n  success: boolean\n  message?: string\n  redirect?: string\n}\n\nexport async function signup(prevState: SignupState, formData: FormData): Promise<SignupState> {\n  const supabase = await createClient()\n\n  const email = formData.get('email') as string\n  const password = formData.get('password') as string\n  const name = formData.get('name') as string\n\n  // 1. Basic Validation\n  if (!email || !password || !name) {\n    return { error: '모든 필드를 입력해주세요.', success: false }\n  }\n\n  try {\n    // 2. Sign Up with Supabase Auth\n    const { data, error } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        data: {\n          name,\n          // metadata that trigger uses\n        },\n      },\n    })\n\n    if (error) {\n      console.error('Signup Error:', error)\n      return { error: error.message, success: false }\n    }\n\n    // 3. Check for Email Confirmation Requirement\n    if (data.user && !data.session) {\n      return { \n        success: true, \n        message: '가입 확인 이메일을 보냈습니다. 이메일을 확인해주세요.' \n      }\n    }\n\n    // 4. Success (Session created)\n    return { success: true, redirect: '/onboarding' }\n\n  } catch (err) {\n    console.error('Unexpected Signup Error:', err)\n    return { error: '알 수 없는 오류가 발생했습니다.', success: false }\n  }\n}"],"names":[],"mappings":";;;;;;;MAWsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,0CAAA"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Proj/cafe-bakery-saas/src/app/auth/signup/page.tsx"],"sourcesContent":["'use client'\n\nimport Link from 'next/link'\nimport { useFormState } from 'react-dom'\nimport { signup, type SignupState } from './actions'\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\n\nconst initialState: SignupState = {\n  success: false,\n  message: '',\n  error: '',\n  redirect: ''\n}\n\nexport default function SignupPage() {\n  const [state, formAction] = useFormState(signup, initialState)\n  const router = useRouter()\n\n  useEffect(() => {\n    if (state.success && state.redirect) {\n      router.push(state.redirect)\n    }\n  }, [state, router])\n\n  return (\n    <div className=\"flex min-h-screen flex-col items-center justify-center py-2 bg-gray-50\">\n      <div className=\"w-full max-w-md space-y-8 px-4 py-8 bg-white shadow-md rounded-lg\">\n        <div className=\"text-center\">\n          <h2 className=\"mt-6 text-3xl font-bold tracking-tight text-gray-900\">\n            회원가입\n          </h2>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            이미 계정이 있으신가요?{' '}\n            <Link href=\"/login\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\n              로그인하기\n            </Link>\n          </p>\n        </div>\n\n        {state.error && (\n          <div className=\"bg-red-50 text-red-500 p-3 rounded-md text-sm text-center border border-red-200\">\n            {state.error}\n          </div>\n        )}\n\n        {state.message && (\n          <div className=\"bg-green-50 text-green-500 p-3 rounded-md text-sm text-center border border-green-200\">\n            {state.message}\n          </div>\n        )}\n\n        <form action={formAction} className=\"mt-8 space-y-6\">\n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">\n                이름\n              </label>\n              <div className=\"mt-1\">\n                <input\n                  id=\"name\"\n                  name=\"name\"\n                  type=\"text\"\n                  autoComplete=\"name\"\n                  required\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border\"\n                  placeholder=\"홍길동\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n                이메일\n              </label>\n              <div className=\"mt-1\">\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border\"\n                  placeholder=\"example@email.com\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n                비밀번호\n              </label>\n              <div className=\"mt-1\">\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  autoComplete=\"new-password\"\n                  required\n                  minLength={6}\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border\"\n                  placeholder=\"********\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              className=\"flex w-full justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              가입하기\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQA,MAAM,eAA4B;IAChC,SAAS;IACT,SAAS;IACT,OAAO;IACP,UAAU;AACZ;AAEe,SAAS;IACtB,MAAM,CAAC,OAAO,WAAW,GAAG,IAAA,4NAAY,EAAC,8KAAM,EAAE;IACjD,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM,OAAO,IAAI,MAAM,QAAQ,EAAE;YACnC,OAAO,IAAI,CAAC,MAAM,QAAQ;QAC5B;IACF,GAAG;QAAC;QAAO;KAAO;IAElB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAuD;;;;;;sCAGrE,8OAAC;4BAAE,WAAU;;gCAA6B;gCAC1B;8CACd,8OAAC,uKAAI;oCAAC,MAAK;oCAAS,WAAU;8CAAoD;;;;;;;;;;;;;;;;;;gBAMrF,MAAM,KAAK,kBACV,8OAAC;oBAAI,WAAU;8BACZ,MAAM,KAAK;;;;;;gBAIf,MAAM,OAAO,kBACZ,8OAAC;oBAAI,WAAU;8BACZ,MAAM,OAAO;;;;;;8BAIlB,8OAAC;oBAAK,QAAQ;oBAAY,WAAU;;sCAClC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAO,WAAU;sDAA0C;;;;;;sDAG1E,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDACC,IAAG;gDACH,MAAK;gDACL,MAAK;gDACL,cAAa;gDACb,QAAQ;gDACR,WAAU;gDACV,aAAY;;;;;;;;;;;;;;;;;8CAKlB,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAQ,WAAU;sDAA0C;;;;;;sDAG3E,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDACC,IAAG;gDACH,MAAK;gDACL,MAAK;gDACL,cAAa;gDACb,QAAQ;gDACR,WAAU;gDACV,aAAY;;;;;;;;;;;;;;;;;8CAKlB,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAW,WAAU;sDAA0C;;;;;;sDAG9E,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDACC,IAAG;gDACH,MAAK;gDACL,MAAK;gDACL,cAAa;gDACb,QAAQ;gDACR,WAAW;gDACX,WAAU;gDACV,aAAY;;;;;;;;;;;;;;;;;;;;;;;sCAMpB,8OAAC;sCACC,cAAA,8OAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}}]
}